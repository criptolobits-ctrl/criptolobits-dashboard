<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê∫ CriptoLobits - Tri-AI Consensus</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f4c75);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 215, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .logo {
            font-size: 3.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #ffd700, #ffed4a, #f39c12);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            margin-bottom: 15px;
        }
        
        .subtitle {
            font-size: 1.4em;
            color: #64b5f6;
            margin-bottom: 10px;
        }
        
        .tri-ai-badge {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 0.9em;
            animation: triGlow 3s ease-in-out infinite;
            position: relative;
        }
        
        @keyframes triGlow {
            0% { box-shadow: 0 0 10px rgba(255, 107, 107, 0.5); }
            33% { box-shadow: 0 0 15px rgba(78, 205, 196, 0.5); }
            66% { box-shadow: 0 0 20px rgba(69, 183, 209, 0.5); }
            100% { box-shadow: 0 0 10px rgba(255, 107, 107, 0.5); }
        }
        
        .api-config {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .config-title {
            font-size: 1.2em;
            color: #ffd700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .api-input {
            width: 100%;
            padding: 10px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            margin-bottom: 10px;
        }
        
        .api-status {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        
        .ai-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            border-radius: 20px;
            background: rgba(0, 0, 0, 0.2);
            font-size: 0.9em;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .status-connected { background: #4caf50; }
        .status-disconnected { background: #f44336; }
        .status-testing { background: #ff9800; }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .crypto-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .crypto-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 215, 0, 0.5);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }
        
        .crypto-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .crypto-name {
            font-size: 1.8em;
            font-weight: bold;
            color: #ffd700;
        }
        
        .crypto-price {
            font-size: 1.4em;
            font-weight: bold;
        }
        
        .price-up { color: #4caf50; }
        .price-down { color: #f44336; }
        
        .tri-ai-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.1);
        }
        
        .consensus-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .consensus-score {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #4caf50, #8bc34a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        
        .consensus-label {
            font-size: 0.9em;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .ai-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .ai-analysis {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        .claude-analysis {
            background: linear-gradient(45deg, rgba(255, 107, 107, 0.2), rgba(255, 107, 107, 0.1));
            border-color: #ff6b6b;
        }
        
        .gemini-analysis {
            background: linear-gradient(45deg, rgba(78, 205, 196, 0.2), rgba(78, 205, 196, 0.1));
            border-color: #4ecdc4;
        }
        
        .glm-analysis {
            background: linear-gradient(45deg, rgba(69, 183, 209, 0.2), rgba(69, 183, 209, 0.1));
            border-color: #45b7d1;
        }
        
        .ai-name {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .ai-score {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .ai-confidence {
            font-size: 0.8em;
            color: #aaa;
        }
        
        .consensus-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .metric {
            padding: 10px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .metric-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #4caf50;
        }
        
        .metric-label {
            font-size: 0.8em;
            color: #aaa;
            text-transform: uppercase;
        }
        
        .recommendation {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .strong-buy {
            background: linear-gradient(45deg, #4caf50, #8bc34a);
            color: white;
        }
        
        .buy {
            background: linear-gradient(45deg, #2196f3, #03a9f4);
            color: white;
        }
        
        .hold {
            background: linear-gradient(45deg, #ff9800, #ffc107);
            color: white;
        }
        
        .sell {
            background: linear-gradient(45deg, #f44336, #e57373);
            color: white;
        }
        
        .update-time {
            text-align: center;
            color: #aaa;
            font-size: 0.9em;
            margin-top: 30px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #aaa;
        }
        
        .spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-radius: 50%;
            border-top-color: #ffd700;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .alert {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #ffc107;
        }
        
        .tri-ai-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 215, 0, 0.1);
        }
        
        .feature-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .feature-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffd700;
        }
        
        .feature-description {
            color: #ccc;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üê∫ CriptoLobits</div>
            <div class="subtitle">An√°lisis de Criptomonedas con IA</div>
            <div class="tri-ai-badge">
                üß†üöÄ‚ö° TRI-AI CONSENSUS - WORLD'S FIRST
            </div>
        </div>

        <div class="api-config">
            <div class="config-title">
                ‚ö° Configuraci√≥n GLM-4.5
            </div>
            <input type="password" class="api-input" id="glmApiKey" placeholder="Ingresa tu API Key de GLM-4.5...">
            <button onclick="testGLMConnection()" class="config-btn">Probar Conexi√≥n</button>
            
            <div class="api-status">
                <div class="ai-status">
                    <span class="status-dot status-connected"></span>
                    üß† Claude: Conectado
                </div>
                <div class="ai-status">
                    <span class="status-dot status-connected"></span>
                    üöÄ Gemini: Conectado
                </div>
                <div class="ai-status">
                    <span class="status-dot" id="glm-status"></span>
                    ‚ö° GLM-4.5: <span id="glm-status-text">Desconectado</span>
                </div>
            </div>
        </div>

        <div class="crypto-grid" id="cryptoGrid">
            <div class="loading">
                <div class="spinner"></div>
                <div>Inicializando sistema tri-AI...</div>
            </div>
        </div>

        <div class="tri-ai-features">
            <div class="feature-card">
                <div class="feature-icon">üß†</div>
                <div class="feature-title">Claude - An√°lisis Fundamental</div>
                <div class="feature-description">
                    An√°lisis profundo de fundamentos, investigaci√≥n macroecon√≥mica, evaluaci√≥n de riesgos y documentaci√≥n detallada de cada recomendaci√≥n.
                </div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">üöÄ</div>
                <div class="feature-title">Gemini - An√°lisis T√©cnico</div>
                <div class="feature-description">
                    Procesamiento avanzado de gr√°ficos, an√°lisis de estructura de mercado, integraci√≥n con Google Cloud y visualizaciones din√°micas.
                </div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <div class="feature-title">GLM-4.5 - Se√±ales en Tiempo Real</div>
                <div class="feature-description">
                    Detecci√≥n ultrarr√°pida de patrones, an√°lisis de sentimiento social, se√±ales de momentum y procesamiento en edge.
                </div>
            </div>
        </div>

        <div class="update-time" id="updateTime">
            √öltima actualizaci√≥n: --
        </div>
    </div>

    <script>
        // Configuraci√≥n de APIs
        const API_CONFIG = {
            glm: {
                endpoint: 'https://open.bigmodel.cn/api/paas/v4/chat/completions',
                model: 'glm-4-flash',
                apiKey: null
            }
        };

        // Datos simulados para demostraci√≥n
        const mockTriAIData = {
            BTC: {
                price: 67421.50,
                change: 2.8,
                claude: { score: 85, confidence: 90, analysis: "Fundamentals s√≥lidos, adopci√≥n institucional creciente" },
                gemini: { score: 88, confidence: 85, analysis: "Breakout t√©cnico confirmado, volumen saludable" },
                glm: { score: 92, confidence: 95, analysis: "Momentum alcista fuerte, se√±ales sociales positivas" },
                consensus: { score: 88.3, confidence: 92.1, agreement: 96.8 },
                recommendation: "STRONG_BUY"
            },
            ETH: {
                price: 3842.75,
                change: 1.9,
                claude: { score: 82, confidence: 88, analysis: "Ecosistema DeFi robusto, actualizaci√≥n Dencun exitosa" },
                gemini: { score: 85, confidence: 82, analysis: "Soporte t√©cnico firme, resistencia en $4000" },
                glm: { score: 89, confidence: 91, analysis: "Sentiment positivo, actividad de desarrollo alta" },
                consensus: { score: 85.2, confidence: 89.7, agreement: 94.2 },
                recommendation: "BUY"
            },
            SOL: {
                price: 198.34,
                change: 4.1,
                claude: { score: 78, confidence: 85, analysis: "Red escalable, crecimiento del ecosistema NFT" },
                gemini: { score: 83, confidence: 87, analysis: "Ruptura de resistencia clave, target $220" },
                glm: { score: 91, confidence: 93, analysis: "Viral momentum, menciones sociales explosivas" },
                consensus: { score: 84.1, confidence: 88.3, agreement: 91.5 },
                recommendation: "BUY"
            }
        };

        // Funci√≥n para probar conexi√≥n GLM-4.5
        async function testGLMConnection() {
            const apiKey = document.getElementById('glmApiKey').value;
            const statusDot = document.getElementById('glm-status');
            const statusText = document.getElementById('glm-status-text');
            
            if (!apiKey) {
                alert('Por favor ingresa tu API Key de GLM-4.5');
                return;
            }
            
            statusDot.className = 'status-dot status-testing';
            statusText.textContent = 'Probando...';
            
            try {
                // Simular prueba de conexi√≥n
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // En implementaci√≥n real, aqu√≠ har√≠amos la llamada a GLM-4.5
                const testSuccess = await testGLMAPI(apiKey);
                
                if (testSuccess) {
                    statusDot.className = 'status-dot status-connected';
                    statusText.textContent = 'Conectado';
                    API_CONFIG.glm.apiKey = apiKey;
                    
                    // Inicializar an√°lisis tri-AI
                    initializeTriAI();
                } else {
                    throw new Error('Conexi√≥n fallida');
                }
            } catch (error) {
                statusDot.className = 'status-dot status-disconnected';
                statusText.textContent = 'Error de conexi√≥n';
                alert('Error al conectar con GLM-4.5: ' + error.message);
            }
        }

        // Funci√≥n simulada para probar API GLM-4.5
        async function testGLMAPI(apiKey) {
            // En implementaci√≥n real, aqu√≠ har√≠amos la llamada a GLM-4.5
            // Por ahora simulamos una respuesta exitosa
            return apiKey.length > 10; // Validaci√≥n b√°sica
        }

        // Inicializar an√°lisis tri-AI
        function initializeTriAI() {
            displayTriAIAnalysis();
            
            // Actualizar cada 2 minutos
            setInterval(updateTriAIAnalysis, 120000);
        }

        // Mostrar an√°lisis tri-AI
        function displayTriAIAnalysis() {
            const grid = document.getElementById('cryptoGrid');
            grid.innerHTML = '';
            
            Object.entries(mockTriAIData).forEach(([symbol, data]) => {
                const card = createCryptoCard(symbol, data);
                grid.appendChild(card);
            });
            
            updateTimeStamp();
        }

        // Crear carta de criptomoneda
        function createCryptoCard(symbol, data) {
            const card = document.createElement('div');
            card.className = 'crypto-card';
            
            const priceClass = data.change >= 0 ? 'price-up' : 'price-down';
            const changeSymbol = data.change >= 0 ? '+' : '';
            
            card.innerHTML = `
                <div class="crypto-header">
                    <div class="crypto-name">${symbol}</div>
                    <div class="crypto-price ${priceClass}">
                        $${data.price.toLocaleString()}
                        <div style="font-size: 0.7em;">${changeSymbol}${data.change}%</div>
                    </div>
                </div>
                
                <div class="tri-ai-section">
                    <div class="consensus-header">
                        <div class="consensus-score">${data.consensus.score}</div>
                        <div class="consensus-label">Consenso Tri-AI</div>
                    </div>
                    
                    <div class="ai-grid">
                        <div class="ai-analysis claude-analysis">
                            <div class="ai-name">üß† Claude</div>
                            <div class="ai-score">${data.claude.score}</div>
                            <div class="ai-confidence">${data.claude.confidence}% confianza</div>
                        </div>
                        <div class="ai-analysis gemini-analysis">
                            <div class="ai-name">üöÄ Gemini</div>
                            <div class="ai-score">${data.gemini.score}</div>
                            <div class="ai-confidence">${data.gemini.confidence}% confianza</div>
                        </div>
                        <div class="ai-analysis glm-analysis">
                            <div class="ai-name">‚ö° GLM-4.5</div>
                            <div class="ai-score">${data.glm.score}</div>
                            <div class="ai-confidence">${data.glm.confidence}% confianza</div>
                        </div>
                    </div>
                    
                    <div class="consensus-metrics">
                        <div class="metric">
                            <div class="metric-value">${data.consensus.confidence}%</div>
                            <div class="metric-label">Confianza</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.consensus.agreement}%</div>
                            <div class="metric-label">Acuerdo</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">A+</div>
                            <div class="metric-label">Calidad</div>
                        </div>
                    </div>
                    
                    <div class="recommendation ${getRecommendationClass(data.recommendation)}">
                        üéØ ${getRecommendationText(data.recommendation)}
                    </div>
                    
                    <div style="margin-top: 15px; font-size: 0.9em; color: #ccc;">
                        <strong>üß† Claude:</strong> ${data.claude.analysis}<br>
                        <strong>üöÄ Gemini:</strong> ${data.gemini.analysis}<br>
                        <strong>‚ö° GLM-4.5:</strong> ${data.glm.analysis}
                    </div>
                </div>
            `;
            
            return card;
        }

        // Obtener clase de recomendaci√≥n
        function getRecommendationClass(rec) {
            const classes = {
                'STRONG_BUY': 'strong-buy',
                'BUY': 'buy',
                'HOLD': 'hold',
                'SELL': 'sell'
            };
            return classes[rec] || 'hold';
        }

        // Obtener texto de recomendaci√≥n
        function getRecommendationText(rec) {
            const texts = {
                'STRONG_BUY': 'COMPRA FUERTE',
                'BUY': 'COMPRA',
                'HOLD': 'MANTENER',
                'SELL': 'VENDER'
            };
            return texts[rec] || 'MANTENER';
        }

        // Actualizar an√°lisis tri-AI
        async function updateTriAIAnalysis() {
            // En implementaci√≥n real, aqu√≠ har√≠amos llamadas a las 3 APIs
            console.log('Actualizando an√°lisis tri-AI...');
            
            // Simular variaci√≥n en los datos
            Object.values(mockTriAIData).forEach(data => {
                data.claude.score += Math.random() * 4 - 2;
                data.gemini.score += Math.random() * 4 - 2;
                data.glm.score += Math.random() * 4 - 2;
                
                // Recalcular consenso
                const avgScore = (data.claude.score + data.gemini.score + data.glm.score) / 3;
                data.consensus.score = Math.round(avgScore * 10) / 10;
            });
            
            displayTriAIAnalysis();
        }

        // Actualizar timestamp
        function updateTimeStamp() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('es-ES');
            document.getElementById('updateTime').textContent = `√öltima actualizaci√≥n: ${timeString}`;
        }

        // Inicializar con datos simulados al cargar la p√°gina
        window.addEventListener('load', () => {
            setTimeout(() => {
                // Mostrar mensaje de configuraci√≥n si GLM no est√° configurado
                if (!API_CONFIG.glm.apiKey) {
                    const grid = document.getElementById('cryptoGrid');
                    grid.innerHTML = `
                        <div class="alert" style="grid-column: 1 / -1;">
                            <strong>‚ö° Configura GLM-4.5:</strong> Para activar el sistema tri-AI completo, 
                            ingresa tu API Key de GLM-4.5 en la secci√≥n de configuraci√≥n arriba.
                            <br><br>
                            <strong>Mientras tanto:</strong> El sistema dual-AI (Claude + Gemini) est√° funcionando.
                        </div>
                    `;
                    
                    // Mostrar an√°lisis dual-AI reducido
                    displayDualAIFallback();
                }
            }, 1000);
        });

        // Mostrar an√°lisis dual-AI como fallback
        function displayDualAIFallback() {
            const grid = document.getElementById('cryptoGrid');
            
            // Mostrar versi√≥n simplificada hasta que GLM est√© configurado
            Object.entries(mockTriAIData).forEach(([symbol, data]) => {
                const card = createDualAICard(symbol, data);
                grid.appendChild(card);
            });
            
            updateTimeStamp();
        }

        // Crear carta dual-AI (sin GLM)
        function createDualAICard(symbol, data) {
            const card = document.createElement('div');
            card.className = 'crypto-card';
            
            const priceClass = data.change >= 0 ? 'price-up' : 'price-down';
            const changeSymbol = data.change >= 0 ? '+' : '';
            
            // Calcular consenso dual-AI (solo Claude + Gemini)
            const dualScore = Math.round(((data.claude.score + data.gemini.score) / 2) * 10) / 10;
            const dualConfidence = Math.round(((data.claude.confidence + data.gemini.confidence) / 2) * 10) / 10;
            
            card.innerHTML = `
                <div class="crypto-header">
                    <div class="crypto-name">${symbol}</div>
                    <div class="crypto-price ${priceClass}">
                        $${data.price.toLocaleString()}
                        <div style="font-size: 0.7em;">${changeSymbol}${data.change}%</div>
                    </div>
                </div>
                
                <div class="tri-ai-section">
                    <div class="consensus-header">
                        <div class="consensus-score">${dualScore}</div>
                        <div class="consensus-label">Consenso Dual-AI</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div class="ai-analysis claude-analysis">
                            <div class="ai-name">üß† Claude</div>
                            <div class="ai-score">${data.claude.score}</div>
                            <div class="ai-confidence">${data.claude.confidence}% confianza</div>
                        </div>
                        <div class="ai-analysis gemini-analysis">
                            <div class="ai-name">üöÄ Gemini</div>
                            <div class="ai-score">${data.gemini.score}</div>
                            <div class="ai-confidence">${data.gemini.confidence}% confianza</div>
                        </div>
                    </div>
                    
                    <div class="consensus-metrics">
                        <div class="metric">
                            <div class="metric-value">${dualConfidence}%</div>
                            <div class="metric-label">Confianza</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">‚ö°</div>
                            <div class="metric-label">GLM Pendiente</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">A</div>
                            <div class="metric-label">Calidad</div>
                        </div>
                    </div>
                    
                    <div class="recommendation ${getRecommendationClass(data.recommendation)}">
                        üéØ ${getRecommendationText(data.recommendation)} (Dual-AI)
                    </div>
                </div>
            `;
            
            return card;
        }
    </script>
</body>
</html>
